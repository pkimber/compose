{% load block_tags %}
{% load thumbnail %}
{%if testing %}<!-- container.card -->{% endif %}
<div class="row">
  <div class="card-columns">
    {% for b in card_list %}
      <div class="{{ b.style.css_class_name }}">

        {% if b.picture and not b.article_type == 'hidden' and not b.article_type == 'w-100 mb-2 mt-3' %}
          <img
            alt="{{ b.picture.title }}"
            title="{{ b.picture.title }}"
            class="card-img {% if not 'img-overlay' in b.style.name %}card-img-top img-fluid{% endif %}"
            {% if not 'img overlay' in b.style.name %}
            src="{% thumbnail b.picture.image 1200x0 crop='false' %}"
            {% else %}
            src="{% thumbnail b.picture.image 600x0 crop='smart' %}"
            {% endif %}>
        {% endif %}

        <div
          {% if 'img overlay' in b.style.name %}
          class="card-block card-img-overlay"
          {% else %}
          class="card-block"
          {% endif %}>

          <{{ b.heading_level }} class="card-title">{{ b.title }}</{{ b.heading_level }}>

          {% if b.description %}
            <div class="card-text">
              {% autoescape off %}
                {{ b.description }}
              {% endautoescape %}
            </div>
          {% endif %}

          {% if b.link %}
            <a href="{{ b.link.url }}" class="btn btn-primary btn-outline card-link">
              <span class="lead font-weight-bold">
              {{ b.link.title }} &raquo;
            </span>
            </a>
          {% endif %}

        </div>

        {% if b.picture and b.article_type == 'w-100 mb-2 mt-3' %}
          <img
            alt="{{ b.picture.title }}"
            title="{{ b.picture.title }}"
            class="card-img-bottom img-fluid"
            src="{% thumbnail b.picture.image 400x0 autocrop %}">
        {% endif %}

        {% if design %}
          <div class="card-footer">
            {% block_moderate b request_path=request_path %}
          </div>
        {% endif %}

      </div>
    {% endfor %}

  </div>
</div>

{% if design %}
  <div class="row">
    <div class="col-12">
      <div class="l-box setting-buttons">
        {% block_add card_create_url 'Card' request_path=request_path %}
      </div>
    </div>
  </div>
{% endif %}
{%if testing %}<!-- /container.card -->{% endif %}
